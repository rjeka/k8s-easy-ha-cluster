# Deploying a High Available Kubernetes Cluster


This playbook deploys a Kubernetes HA cluster.

## What this playbook doing:
- on the machine from which the playbook is launched, a temporary directory /tmp/k8s is created. You will need it to copy the ETCD and Kubernetes certificates after initializing the first master. It will also add an initialization string generated by kubeadmin

- kubelet, kubectl, and kubeadm are installed on masters, worker nodes, and nodes under ingress
- CRI is setup on masters, worker nodes, and ingress nodes
- an ETCD cluster with TLS is installed on the master nodes
- on the first master node using kubeadm init we create the first cluster master certificates, keys, etc
- using the generated configuration files, the rest of the master nodes are added to the cluster
- stup CNI
- add workers nodes to the cluster
- setting up haproxy like an API load balancer
- configured ingress controller
- set up helm



## Getting started:

```bash
git clone https://github.com/rjeka/k8s-easy-ha-cluster.git
cd k8s-easy-ha-cluster
vim hosts
```

```bash
ansible-playbook -i <inventory> install_kubernetes_cluster.yml
```



